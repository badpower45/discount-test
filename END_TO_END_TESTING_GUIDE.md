# ๐งช ุฏููู ุงูุงุฎุชุจุงุฑ ุงูุดุงูู End-to-End Testing Guide

## ุงููุฏู
ุงุฎุชุจุงุฑ ุฏูุฑุฉ ุญูุงุฉ ุงูุทูุจ ุงููุงููุฉ ูู ุงูุนููู โ ุงูุชุงุฌุฑ โ ุงูููุฒุน โ ุงูุณุงุฆู โ ุงูุชุณููู

---

## ๐ ุงูุฎุทูุฉ 1: ุฅุนุฏุงุฏ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ

### ุฃ) ุงุณุชุฎุฏุงู ุฃุฏุงุฉ ุงูุฅุนุฏุงุฏ ุงูุชููุงุฆู (ุงูุทุฑููุฉ ุงูุณุฑูุนุฉ)

1. ุงูุชุญ ููู `test-data-setup.html` ูู ุงููุชุตูุญ
2. ุงุถุบุท ุนูู "๐ ุฅุนุฏุงุฏ ุฌููุน ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ"
3. ุงูุชุธุฑ ุญุชู ุชูุชูู ุงูุนูููุฉ (ุณุชุธูุฑ ุฑุณุงุฆู ุงููุฌุงุญ)
4. ุญุฏูุซ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ููุชุทุจูู

**ูุง ุณูุชู ุฅุถุงูุชู:**
- โ 3 ูุทุงุนู ุชุฌุฑูุจูุฉ (ุงูุจููุ ุณุชุงุฑุจูุณุ ูุงูุฏููุงูุฏุฒ)
- โ 3 ุณุงุฆููู ูุชุงุญูู (ุฃุญูุฏุ ุฎุงูุฏุ ูุญููุฏ)
- โ ููุงุญุธุฉ ุญูู ุฅุถุงูุฉ ููุฒุน

### ุจ) ุงูุฅุนุฏุงุฏ ุงููุฏูู ุนุจุฑ Supabase Dashboard

ุฅุฐุง ูู ุชุนูู ุงูุฃุฏุงุฉุ ุงุณุชุฎุฏู SQL ุงูุชุงูู ูู Supabase SQL Editor:

```sql
-- ุฅุถุงูุฉ ูุทุงุนู ุชุฌุฑูุจูุฉ
INSERT INTO restaurants (name, description, category, discount_percentage, image_url, is_active)
VALUES 
  ('ูุทุนู ุงูุจูู', 'ุฃุดูุฑ ูุทุนู ููุฏุฌุงุฌ ุงููููู ูู ุงูุณุนูุฏูุฉ', 'restaurant', 25, 'https://images.unsplash.com/photo-1626082927389-6cd097cdc6ec?w=400', true),
  ('ูููู ุณุชุงุฑุจูุณ', 'ูููุฉ ุนุงูููุฉ ุจุฌูุฏุฉ ุนุงููุฉ', 'cafe', 15, 'https://images.unsplash.com/photo-1559305616-3b03921c4593?w=400', true),
  ('ูุทุนู ูุงูุฏููุงูุฏุฒ', 'ูุฌุจุงุช ุณุฑูุนุฉ ูุฌููุน ุงูุฃุนูุงุฑ', 'restaurant', 20, 'https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400', true);

-- ุฅุถุงูุฉ ุณุงุฆููู ุชุฌุฑูุจููู
INSERT INTO delivery_drivers (full_name, phone_number, email, vehicle_type, status, rating, total_deliveries, city, current_location)
VALUES 
  ('ุฃุญูุฏ ูุญูุฏ', '+966501234567', 'ahmed.driver@test.com', 'motorcycle', 'available', 4.8, 150, 'ุงููุงูุฑุฉ', '{"lat": 30.0444, "lng": 31.2357}'),
  ('ุฎุงูุฏ ุนูู', '+966502234567', 'khaled.driver@test.com', 'bicycle', 'available', 4.9, 200, 'ุงููุงูุฑุฉ', '{"lat": 30.0500, "lng": 31.2400}'),
  ('ูุญููุฏ ุญุณู', '+966503234567', 'mahmoud.driver@test.com', 'car', 'available', 4.7, 180, 'ุงููุงูุฑุฉ', '{"lat": 30.0600, "lng": 31.2500}');
```

---

## ๐ฌ ุงูุฎุทูุฉ 2: ุณููุงุฑูู ุงูุงุฎุชุจุงุฑ ุงููุงูู

### ุงููุฑุญูุฉ 1๏ธโฃ: ุงูุนููู ูุถุน ุงูุทูุจ (Customer Order Creation)

**ุงูุฅุฌุฑุงุก:**
1. ุงูุชุญ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ: `http://localhost:5000/`
2. ุชุตูุญ ุงููุทุงุนู ุงููุชุงุญุฉ (ูุฌุจ ุฃู ุชุธูุฑ 3 ูุทุงุนู)
3. ุงุฎุชุฑ ูุทุนู ูุงุถุบุท "ุงุทูุจ ุงูุขู"
4. ุงููุฃ ุจูุงูุงุช ุงูุนููู:
   - **ุงูุงุณู**: ุฃุญูุฏ ุงูุนููู
   - **ุงููุงุชู**: +966555123456
   - **ุงูุนููุงู**: ุดุงุฑุน ุงูููู ููุฏ
   - **ุงููุฏููุฉ**: ุงููุงูุฑุฉ
   - **ุงูููุทูุฉ**: ุงููุฒูุฉ
5. ุฃุถู ุฃู ููุงุญุธุงุช ุฎุงุตุฉ
6. ุงุถุบุท "ุชุฃููุฏ ุงูุทูุจ"

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฑุณุงูุฉ ูุฌุงุญ ุชุธูุฑ: "ุชู ุชูุฏูู ุทูุจู ุจูุฌุงุญ!"
- โ ุฑูู ุงูุทูุจ ูุธูุฑ (ูุซู: ORD-20251019-XXXX)
- โ ุงูุญุงูุฉ ุงูุฃูููุฉ: `pending_restaurant_acceptance`

---

### ุงููุฑุญูุฉ 2๏ธโฃ: ุงูุชุงุฌุฑ ููุจู ููุญุถูุฑ ุงูุทูุจ (Merchant Dashboard)

**ุงูุฅุฌุฑุงุก:**
1. ุงูุชุญ ููุญุฉ ุงูุชุงุฌุฑ: `http://localhost:5000/merchant`
2. ุณุฌูู ุงูุฏุฎูู (ุฃู ุงุณุชุฎุฏู ุจูุงูุงุช ุชุงุฌุฑ ุชุฌุฑูุจู)
3. ุงูุชูู ุฅูู ุชุจููุจ "ุงูุทูุจุงุช"
4. ูุฌุจ ุฃู ุชุฑู ุงูุทูุจ ุงูุฌุฏูุฏ ุจุญุงูุฉ "ููุฏ ุงูุงูุชุธุงุฑ"
5. ุงุถุบุท ุฒุฑ "ูุจูู ุงูุทูุจ" (Accept)
   - **ุงููุชูุฌุฉ**: ุงูุญุงูุฉ ุชุชุบูุฑ ุฅูู `confirmed`
6. ุงุถุบุท ุฒุฑ "ุฌุงุฑู ุงูุชุญุถูุฑ" (Preparing)
   - **ุงููุชูุฌุฉ**: ุงูุญุงูุฉ ุชุชุบูุฑ ุฅูู `preparing`
7. ุงุถุบุท ุฒุฑ "ุฌุงูุฒ ููุชูุตูู" (Mark as Ready)
   - **ุงููุชูุฌุฉ**: ุงูุญุงูุฉ ุชุชุบูุฑ ุฅูู `ready_for_pickup`

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุทูุจ ูุธูุฑ ูู ููุญุฉ ุงูุชุงุฌุฑ
- โ ุงูุฃุฒุฑุงุฑ ุชุนูู ุจุดูู ุตุญูุญ
- โ ุงูุญุงูุฉ ุชุชุญุฏุซ ููุฑุงู (Optimistic UI)
- โ **ูุง ูุชู ุชุนููู ุณุงุฆู ุชููุงุฆูุงู** (ุงูุชุญุฏูุซ ุงูุฌุฏูุฏ)

---

### ุงููุฑุญูุฉ 3๏ธโฃ: ุงูููุฒุน ูุนููู ุณุงุฆู (Dispatcher Dashboard)

**ุงูุฅุฌุฑุงุก:**
1. ุงูุชุญ ููุญุฉ ุงูููุฒุน: `http://localhost:5000/dispatcher`
2. ุณุฌูู ุงูุฏุฎูู (ูุฌุจ ุฃู ูููู ูุฏูู ุญุณุงุจ dispatcher)
3. ูู ุชุจููุจ "ุงูุทูุจุงุช ุงูุฌุงูุฒุฉ ููุชูุตูู":
   - ูุฌุจ ุฃู ูุธูุฑ ุงูุทูุจ ุงูุฐู ุฃุนุฏู ุงูุชุงุฌุฑ
4. ูู ุชุจููุจ "ุงูุณุงุฆููู ุงููุชุงุญูู":
   - ูุฌุจ ุฃู ุชุธูุฑ ูุงุฆูุฉ ุงูุณุงุฆููู (ุฃุญูุฏุ ุฎุงูุฏุ ูุญููุฏ)
5. ุงุถุบุท ุนูู "ุชุนููู" ุจุฌุงูุจ ุฃุญุฏ ุงูุณุงุฆููู
6. ุงุฎุชุฑ ุงูุทูุจ ูู ุงููุงุฆูุฉ
7. ุงุถุบุท "ุชุฃููุฏ ุงูุชุนููู"

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุทูุจ ูุธูุฑ ูู ูุงุฆูุฉ "ุงูุทูุจุงุช ุงูุฌุงูุฒุฉ"
- โ ุงูุณุงุฆููู ุงููุชุงุญูู ูุธูุฑูู ูุน ุชููููุงุชูู
- โ ุจุนุฏ ุงูุชุนููู: ุงูุญุงูุฉ ุชุชุบูุฑ ุฅูู `en_route_to_restaurant`
- โ ุงูุณุงุฆู ุงููุนููู ูุชุบูุฑ ุญุงูุชู ุฅูู `busy`

---

### ุงููุฑุญูุฉ 4๏ธโฃ: ุงูุณุงุฆู ูุณุชูู ููุณููู ุงูุทูุจ (Driver Dashboard)

**ุงูุฅุฌุฑุงุก:**
1. ุงูุชุญ ููุญุฉ ุงูุณุงุฆู: `http://localhost:5000/driver`
2. ุณุฌูู ุงูุฏุฎูู ูุณุงุฆู (ุงุณุชุฎุฏู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุฃุญุฏ ุงูุณุงุฆููู)
3. ูุฌุจ ุฃู ูุธูุฑ ุงูุทูุจ ุงูููุนููู
4. **ุชุญูู ูู ุงูุฎุฑูุทุฉ**:
   - โ ูุฌุจ ุฃู ุชุธูุฑ ุฎุฑูุทุฉ ุชูุงุนููุฉ
   - โ ุนูุงูุฉ ูููุน ุงููุทุนู (Restaurant Marker)
   - โ ุนูุงูุฉ ูููุน ุงูุนููู (Customer Marker)
5. ุงุถุบุท ุนูู ุงูุฃุฒุฑุงุฑ ุจุงูุชุฑุชูุจ:
   - **"ูู ุทุฑููู ูููุทุนู"** โ ุงูุญุงูุฉ: `en_route_to_restaurant`
   - **"ุงุณุชููุช ุงูุทูุจ"** โ ุงูุญุงูุฉ: `picked_up`
   - **"ูู ุทุฑููู ููุนููู"** โ ุงูุญุงูุฉ: `in_transit`
   - **"ุชู ุงูุชุณููู"** โ ุงูุญุงูุฉ: `delivered`

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุทูุจ ูุธูุฑ ูู ููุญุฉ ุงูุณุงุฆู
- โ **ุงูุฎุฑูุทุฉ ุชุนุฑุถ ูููุน ุงููุทุนู ูุงูุนููู**
- โ ุงูุฃุฒุฑุงุฑ ุชุนูู ุจุชุณูุณู ููุทูู
- โ ูู ุฒุฑ ูุญุฏูุซ ุงูุญุงูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุฑุงู

---

### ุงููุฑุญูุฉ 5๏ธโฃ: ุงูููุฒุน ููููู ุงูุณุงุฆู (Dispatcher Rating)

**ุงูุฅุฌุฑุงุก:**
1. ุงุฑุฌุน ุฅูู ููุญุฉ ุงูููุฒุน
2. ุงูุชูู ุฅูู ุชุจููุจ "ุชูููู ุงูุณุงุฆููู"
3. ุงุฎุชุฑ ุงูุณุงุฆู ุงูุฐู ุฃููู ุงูุชูุตูู
4. ุงุฎุชุฑ ุงูุชูููู (1-5 ูุฌูู)
5. ุงูุชุจ ุชุนููู (ุงุฎุชูุงุฑู)
6. ุงุถุบุท "ุฅุฑุณุงู ุงูุชูููู"

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุชูููู ููุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ูุนุฏู ุชูููู ุงูุณุงุฆู ูุชุญุฏุซ
- โ ุฑุณุงูุฉ ูุฌุงุญ ุชุธูุฑ

---

## โ ูุนุงููุฑ ุงููุฌุงุญ ุงููููุฉ

### ุงูุชุญูู ูู Real-time Updates
- [ ] ุชุญุฏูุซ ุงูุญุงูุฉ ูู ููุญุฉ ุงูุชุงุฌุฑ ูุธูุฑ ููุฑุงู
- [ ] ุชุนููู ุงูุณุงุฆู ูุธูุฑ ูู ููุญุฉ ุงูุณุงุฆู ุฎูุงู 5 ุซูุงูู
- [ ] ุชุญุฏูุซุงุช ุงูุณุงุฆู ุชุธูุฑ ูู ููุญุฉ ุงูููุฒุน ููุฑุงู

### ุงูุชุญูู ูู ุฏูุฌ ุงูุฎุฑูุทุฉ
- [ ] ุงูุฎุฑูุทุฉ ุชุธูุฑ ูู ููุญุฉ ุงูุณุงุฆู
- [ ] ูููุน ุงููุทุนู ูุญุฏุฏ ุจุฏูุฉ
- [ ] ูููุน ุงูุนููู ูุญุฏุฏ ุจุฏูุฉ
- [ ] ูููู ุงูุชูุงุนู ูุน ุงูุฎุฑูุทุฉ (ุชูุจูุฑ/ุชุตุบูุฑ)

### ุงูุชุญูู ูู ุชุณูุณู ุงูุญุงูุงุช
```
pending_restaurant_acceptance 
  โ confirmed 
  โ preparing 
  โ ready_for_pickup 
  โ en_route_to_restaurant (ุจุนุฏ ุชุนููู ุงูููุฒุน)
  โ picked_up 
  โ in_transit 
  โ delivered
```

### ุงูุชุญูู ูู ุงูุฃุฎุทุงุก ุงููุญุชููุฉ
- [ ] ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู console ุงููุชุตูุญ
- [ ] ุฌููุน ุงูุฃุฒุฑุงุฑ ุชุนูู
- [ ] ูุง ุชูุฌุฏ ุฑุณุงุฆู ุฎุทุฃ ูู Supabase
- [ ] ุงูุจูุงูุงุช ุชูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงููุทุงุนู ูุง ุชุธูุฑ
**ุงูุญู:**
1. ุงูุชุญ `test-data-setup.html` ูุฃุถู ุงููุทุงุนู
2. ุชุญูู ูู ุงุชุตุงู Supabase ูู `.env.local`
3. ุชุญูู ูู console ุงููุชุตูุญ ูุฃู ุฃุฎุทุงุก

### ุงููุดููุฉ: ููุญุฉ ุงูููุฒุน ูุง ุชุนูู
**ุงูุญู:**
1. ุชุญูู ูู ุฃู ุงููุณุชุฎุฏู ูู `role = 'dispatcher'` ูู ุฌุฏูู `merchants`
2. ูู ุจุชุญุฏูุซ ุงูุตูุงุญูุงุช ูู Supabase Dashboard

### ุงููุดููุฉ: ุงูุฎุฑูุทุฉ ูุง ุชุธูุฑ
**ุงูุญู:**
1. ุชุญูู ูู ุฃู ุญูู `customer_location` ูู ุงูุทูุจ ูุญุชูู ุนูู `{lat, lng}`
2. ุชุฃูุฏ ูู ุชุซุจูุช `react-leaflet` ู `leaflet`

### ุงููุดููุฉ: ุงูุณุงุฆู ูุง ูุณุชูุจู ุงูุทูุจุงุช
**ุงูุญู:**
1. ุชุญูู ูู ุฃู ุงูุณุงุฆู `status = 'available'`
2. ุชุฃูุฏ ูู ุฃู `delivery_driver_id` ูู ุงูุทูุจ ูุทุงุจู ID ุงูุณุงุฆู

---

## ๐ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

- [ ] โ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ูุถุงูุฉ (ูุทุงุนู + ุณุงุฆููู)
- [ ] โ ุงูุนููู ููููู ุฅูุดุงุก ุทูุจ
- [ ] โ ุงูุชุงุฌุฑ ููููู ูุจูู ูุชุญุถูุฑ ุงูุทูุจ
- [ ] โ ุงูููุฒุน ููููู ุฑุคูุฉ ุงูุทูุจุงุช ุงูุฌุงูุฒุฉ
- [ ] โ ุงูููุฒุน ููููู ุชุนููู ุณุงุฆู
- [ ] โ ุงูุณุงุฆู ูุณุชูุจู ุงูุทูุจ ุงูููุนููู
- [ ] โ ุงูุฎุฑูุทุฉ ุชุนูู ูุชุนุฑุถ ุงูููุงูุน
- [ ] โ ุงูุณุงุฆู ููููู ุชุญุฏูุซ ุงูุญุงูุฉ
- [ ] โ ุงูููุฒุน ููููู ุชูููู ุงูุณุงุฆู
- [ ] โ Real-time updates ุชุนูู
- [ ] โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู Console

---

## ๐ ุจุนุฏ ุฅุชูุงู ุงูุงุฎุชุจุงุฑ

1. **ูุซูู ุฃู ุฃุฎุทุงุก** ุชู ุงูุชุดุงููุง
2. **ุตุญูุญ ุงูุฃุฎุทุงุก** ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู
3. **ุฃุนุฏ ุงูุงุฎุชุจุงุฑ** ููุชุฃูุฏ ูู ุงูุฅุตูุงุญ
4. **ุญุฏูุซ replit.md** ุจูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ
5. **ุฌููุฒ ูููุดุฑ** ุญุณุจ `PRODUCTION-READY.md`

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:
- ุฑุงุฌุน logs ุงูู console ูู ุงููุชุตูุญ
- ุชุญูู ูู Supabase Dashboard
- ุฑุงุฌุน ุงููููุงุช:
  - `src/components/OrderPage.tsx`
  - `src/components/MerchantDashboard.tsx`
  - `src/components/DispatcherDashboard.tsx`
  - `src/components/DeliveryDriverDashboard.tsx`
  - `src/lib/database-functions.ts`

---

**ุขุฎุฑ ุชุญุฏูุซ**: ุฃูุชูุจุฑ 19ุ 2025
**ุงูุญุงูุฉ**: ุฌุงูุฒ ููุงุฎุชุจุงุฑ โ
